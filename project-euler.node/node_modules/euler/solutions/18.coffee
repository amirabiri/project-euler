parse = require 'euler/common/parse'
data  = require 'euler/common/data'

triangle = null

exports.initialize = ->
  triangle = parse.matrix data.getFilename()

exports.solve = ->
  paths = triangle.last()

  for i in [triangle.length - 2 .. 0] by -1
    nextPaths = []
    for j in [0..triangle[i].length - 1]
      pathToTake = if paths[j] > paths[j + 1] then paths[j] else paths[j + 1]
      nextPaths[j] = pathToTake + triangle[i][j]
    paths = nextPaths

  paths[0]
