numbers = require 'euler/common/numbers'

abundants  = null
isAbundant = null

exports.solve = ->
  findAbundants()

  sum = 0
  for n in [1..28123]
    if not isAbundantSum(n)
      sum += n

  return sum

findAbundants = ->
  abundants  = []
  isAbundant = {}

  for num in [2..28123]
    if numbers.sum(numbers.getDivisors(num)) > num
      abundants.push num
      isAbundant[num] = true

isAbundantSum = (n)->
  for abundant in abundants
    break       if abundant >= n
    return true if isAbundant[n - abundant]
  return false