numbers = require 'euler/common/numbers'

divisorSums = null

exports.solve = ->
  amicables = []
  divisorSums = {}
  divisorSums[1] = 0

  for n in [2..10000]
    sum = sumDivisors(n)

    continue if sum > 10000 || sum <= n

    if sumDivisors(sum) == n
      amicables.push n
      amicables.push sum

  divisorSums = null;
  return numbers.sum(amicables)

sumDivisors = (n)->
  sum = divisorSums[n]
  if not sum?
    sum = numbers.sum(numbers.getDivisors(n))
    divisorSums[n] = sum
  return sum

